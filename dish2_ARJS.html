<!DOCTYPE html>
<html>
<script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
<!-- we import arjs version without NFT but with marker + location based support -->
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
<script src="https://raw.githack.com/fcor/arjs-gestures/master/dist/gestures.js"></script>
<script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
<script>
  // I need a way to differentiate the markers
  // Could be that I just make markers with QR to each model (seperate webpages for each)
  // https://medium.com/chialab-open-source/how-to-deliver-ar-on-the-web-only-with-a-qr-code-e24b7b61f8cb
  var found = false;
  // https://ar-js-org.github.io/AR.js-Docs/ui-events/
  AFRAME.registerComponent('markerhandler', {
    init: function () {
      this.el.sceneEl.addEventListener('markerFound', () => {
        // redirect to custom URL e.g. google.com
        //window.location = '../../modelviewer';
        found = true;
      })
      this.el.sceneEl.addEventListener('markerLost', () => {
        // redirect to custom URL e.g. google.com
        found = false;
      })
    }
  });

  // https://aframe.io/docs/1.0.0/introduction/javascript-events-dom-apis.html
  window.onload = function () {
    document
      .querySelector(".say-hi-button")
      .addEventListener("click", function () {
        // here you can change also a-scene or a-entity properties, like
        // changing your 3D model source, size, position and so on
        // or you can just open links, trigger actions...
        if (found == true) {
          window.location = 'dish1_MV.html';
        }
      });
  };
</script>
<style>
  .buttons {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 5em;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10;
  }

  .say-hi-button {
    padding: 0.25em;
    border-radius: 4px;
    border: none;
    background: white;
    color: black;
    width: 4em;
    height: 2em;
  }
</style>

<body style="margin : 0px; overflow: hidden;">

  <a-scene embedded arjs arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;" embedded
    renderer="logarithmicDepthBuffer: true;" vr-mode-ui="enabled: false" gesture-detector id="scene">
    <!-- I need a way to change the link and value of the button acording to the marker detected-->
    <div class="buttons">
      <button id="hi" class="say-hi-button">Inspect</button>
    </div>

    <a-assets>
      <a-asset-item id="bowser" src="assets/3D-models/copepod/scene.gltf">
      </a-asset-item>
    </a-assets>
    <a-marker markerhandler type='barcode' value='7' preset="hiro" raycaster="objects: .clickable" emitevents="true"
      cursor="fuse: false; rayOrigin: mouse;" id="markerA">

      <a-entity id="bowser-model" gltf-model="#bowser" position="0 0 0" scale="0.09 0.09 0.09" class="clickable"
        animation-mixer gesture-handler>
      </a-entity>
    </a-marker>

    <a-entity camera></a-entity>
  </a-scene>
</body>

</html>